=== Cache Yamero ===
Contributors: netservice
Tags: cache, development, debug, refresh
Requires at least: 6.0
Tested up to: 6.8
Requires PHP: 7.4
Stable tag: 1.0.0
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html

人の操作時だけページ遷移URLに ?cache-yamero=YYYYMMDDHHmmss を付与してキャッシュを無効化する開発補助ツール。DOMは汚さない。

== Description ==

Cache Yamero は開発時のキャッシュ問題を解決するWordPressプラグインです。人の操作（クリックやフォーム送信）時のみ、ページ遷移URLに `?cache-yamero=YYYYMMDDHHmmss` パラメータを自動付与し、常に新しいHTML/CSSを取得します。

**主な特徴:**

* **クリック時だけクエリ付与** - 自動的な遷移や検索エンジンのクローリングには影響しません
* **DOM非改変** - ページのHTMLを直接書き換えることなく、遷移時のみURLを動的に変更
* **SEO影響最小化** - 検索エンジンには通常のURLが見えるため、SEOへの悪影響を防ぎます
* **BFCache対応** - ブラウザの戻るボタン使用時も適切にキャッシュを無効化
* **期間限定対応** - 開始・終了日時を設定して一時的な運用が可能
* **権限ベース制御** - 管理者のみまたはすべての訪問者への適用を選択可能

**開発・公開前後の一時運用に最適:**

開発中のサイトでCSSやJavaScriptの変更がブラウザキャッシュのため反映されない問題を解決します。また、公開前後の検証期間中に限定して利用することも可能です。

== Installation ==

1. プラグインファイルを `/wp-content/plugins/cache-yamero/` ディレクトリにアップロード
2. WordPress管理画面の「プラグイン」メニューからプラグインを有効化
3. 「設定」→「Cache Yamero」で設定を行う

== Frequently Asked Questions ==

= このプラグインはSEOに影響しますか？ =

いいえ。Cache Yamero はクリック時のみURLにパラメータを付与し、ページのHTMLは一切変更しません。検索エンジンのクローラーには通常のURLが見えるため、SEOへの影響はありません。

= どのような遷移に対応していますか？ =

以下の操作に対応しています：
- 通常のリンククリック（同一オリジン）
- location.assign() / location.replace() / location.href の使用
- GETフォームの送信（設定で有効化時）

以下は除外されます：
- アンカーリンク (#で始まるリンク)
- 外部サイトへのリンク
- mailto: や tel: リンク
- target="_blank" のリンク
- Ctrl/Cmd + クリックなどの修飾キー使用時

= BFCache（戻るボタン）対応について教えてください =

ブラウザの戻るボタンでページがキャッシュから復元された場合、自動的に1回だけリロードしてキャッシュを無効化します。ループを防ぐためページごとにフラグを管理し、過度なリロードは発生しません。

= 有効期間の設定はどのように機能しますか？ =

開始日時と終了日時を設定することで、指定期間内のみプラグインを動作させることができます。空白の場合は期間制限なしで動作します。公開前の検証期間や一時的なデバッグ時に便利です。

= GETフォーム対応とは何ですか？ =

検索フォームなどのGETメソッドを使用するフォーム送信時にも、遷移先URLにキャッシュ無効化パラメータを自動で追加する機能です。POSTフォームは対象外です。

== Screenshots ==

1. 管理画面設定ページ - 有効化、適用範囲、有効期間の設定
2. オプション設定 - GETフォーム対応とURLクリーンアップの設定

== Changelog ==

= 1.0.0 =
* 初回リリース
* クリック時キャッシュ無効化機能
* 管理者のみ/全訪問者の適用範囲選択
* 有効期間設定機能
* GETフォーム対応
* BFCache対策機能
* URLクリーンアップ機能
* 多言語対応（日本語/英語）

== Upgrade Notice ==

= 1.0.0 =
初回リリース。開発時のキャッシュ問題を解決する必須ツールです。